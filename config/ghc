# Testsuite configuration setup for GHC
#
# This file is Python source
#
config.compiler_type         = 'ghc'
config.compiler              = 'ghc'
config.compiler_always_flags = ['-no-recomp', '-dcore-lint']

# By default, we test the 'normal' and 'opt' ways.
# 'optasm' is added by mk/test.mk if the compiler has a native code gen,
# 'prof'   is added by mk/test.mk if the profiling way is enabled.
config.compile_ways	     = ['normal', 'opt']
config.run_ways		     = ['normal', 'opt']

if (ghc_with_native_codegen == 1):
	config.compile_ways.append('optasm')
	config.run_ways.append('optasm')

if (ghc_with_profiling == 1):
	config.compile_ways.append('prof')
	config.run_ways.append('prof')

if (ghc_with_interpreter == 1):
	config.run_ways.append('ghci')

config.way_flags = { 'normal' : [],
		     'opt'    : ['-O'],
		     'optasm' : ['-O -fasm'],
	  	     'prof'   : ['-O -prof -auto-all'],
		     'unreg'  : ['-unreg'],
		     'ghci'   : ['--interactive', '-v0']
		   }

