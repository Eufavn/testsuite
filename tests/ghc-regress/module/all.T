# These tests were swiped from the hugs98 source tree, in hugs98/tests/static,
# on 16/10/2002.
#
# I used something like this to partly-automate the transition:
#
# for i in mod*.hs; do 
#   if ! test -f ${i%.hs}.output; then 
#      echo "test('${i%.hs}', normal, compile, [''])"
#   else if grep error ${i%.hs}.output >/dev/null; then
#      echo "test('${i%.hs}', normal, compile_fail, [''])"
#   else 
#      echo "test('${i%.hs}', normal, compile, [''])"
#   fi fi
# done
#
# A few of the tests use Hugs-specific extensions, and have been
# commented out.

# No point in doing anything except the normal way for renamer tests
setTestOpts(only_ways(['normal']));

test('mod1', normal, compile_fail, [''])
test('mod2', normal, compile_fail, [''])
test('mod3', normal, compile_fail, [''])
test('mod4', normal, compile_fail, [''])
test('mod5', normal, compile, [''])
test('mod6', normal, compile, [''])
test('mod7', normal, compile_fail, [''])
test('mod8', normal, compile, [''])
test('mod9', normal, compile_fail, [''])
test('mod10', normal, compile_fail, [''])
test('mod11', normal, compile, [''])
test('mod12', normal, compile, [''])
test('mod13', normal, compile, [''])
test('mod14', normal, compile, [''])
test('mod15', normal, compile, [''])
test('mod16', normal, compile, [''])
test('mod17', normal, compile_fail, [''])
test('mod18', normal, compile_fail, [''])
test('mod19', normal, compile_fail, [''])
test('mod20', normal, compile_fail, [''])
test('mod21', normal, compile_fail, [''])
test('mod22', normal, compile_fail, [''])
test('mod23', normal, compile_fail, [''])
test('mod24', normal, compile_fail, [''])
test('mod25', normal, compile_fail, [''])
test('mod26', normal, compile_fail, [''])
test('mod27', normal, compile_fail, [''])
#test('mod28', normal, compile_fail, [''])
test('mod29', normal, compile_fail, [''])
test('mod30', normal, compile, [''])
test('mod31', normal, compile, [''])
test('mod32', normal, compile, [''])
test('mod33', normal, compile, [''])
test('mod34', normal, compile, [''])
test('mod35', normal, compile, [''])
test('mod36', normal, compile_fail, [''])
test('mod37', normal, compile, [''])
test('mod38', normal, compile_fail, [''])
test('mod39', normal, compile, [''])
test('mod40', normal, compile_fail, [''])
test('mod41', normal, compile_fail, [''])
test('mod42', normal, compile_fail, [''])
test('mod43', normal, compile_fail, [''])
test('mod44', normal, compile_fail, [''])
test('mod45', normal, compile_fail, [''])
test('mod46', normal, compile_fail, [''])
test('mod47', normal, compile_fail, [''])
test('mod48', normal, compile_fail, [''])
test('mod49', normal, compile_fail, [''])
test('mod50', normal, compile_fail, [''])
test('mod51', normal, compile_fail, [''])
test('mod52', normal, compile_fail, [''])
test('mod53', normal, compile_fail, [''])
test('mod54', normal, compile_fail, [''])
test('mod55', normal, compile_fail, [''])
test('mod56', normal, compile_fail, [''])
#test('mod57', normal, compile_fail, [''])
test('mod58', normal, compile_fail, [''])
test('mod59', normal, compile_fail, [''])
test('mod60', normal, compile_fail, [''])
test('mod61', normal, compile_fail, [''])
test('mod62', normal, compile_fail, [''])
test('mod63', normal, compile_fail, [''])
test('mod64', normal, compile, [''])
test('mod65', normal, compile, [''])
test('mod66', normal, compile_fail, [''])
test('mod67', normal, compile_fail, [''])
test('mod68', normal, compile_fail, [''])
test('mod69', normal, compile_fail, [''])
test('mod70', normal, compile_fail, [''])
test('mod71', normal, compile_fail, [''])
test('mod72', normal, compile_fail, [''])
test('mod73', normal, compile_fail, [''])
test('mod74', normal, compile_fail, [''])
test('mod75', normal, compile, [''])
test('mod76', normal, compile_fail, [''])
test('mod77', normal, compile_fail, [''])
#test('mod78', normal, compile_fail, [''])
test('mod79', normal, compile_fail, [''])
test('mod80', normal, compile_fail, [''])
test('mod81', normal, compile_fail, [''])
test('mod82', normal, compile, [''])
test('mod83', normal, compile, [''])
test('mod84', normal, compile, [''])
test('mod85', normal, compile, [''])
test('mod86', normal, compile, [''])
test('mod87', normal, compile_fail, [''])
test('mod88', normal, compile_fail, [''])
test('mod89', normal, compile_fail, [''])
test('mod90', normal, compile_fail, [''])
test('mod91', normal, compile_fail, [''])
test('mod92', normal, compile, [''])
test('mod93', normal, compile, [''])
test('mod94', normal, compile, [''])
test('mod95', normal, compile, [''])
test('mod96', normal, compile, [''])
test('mod97', normal, compile_fail, [''])
test('mod98', normal, compile_fail, [''])
test('mod99', normal, compile, [''])
test('mod100', normal, compile, [''])
test('mod101', normal, multimod_compile_fail, ['mod101', '-v0'])
clean(['Mod101_AuxA.hi', 'Mod101_AuxA.o', 'Mod101_AuxB.hi', 'Mod101_AuxB.o'])
test('mod102', normal, multimod_compile_fail, ['mod102', '-v0'])
clean(['Mod102_AuxA.hi', 'Mod102_AuxA.o', 'Mod102_AuxB.hi', 'Mod102_AuxB.o'])
test('mod103', normal, compile, [''])
test('mod104', normal, compile, [''])
test('mod105', normal, compile, [''])
test('mod106', normal, compile, [''])
test('mod107', normal, compile, [''])
test('mod108', normal, compile, [''])
test('mod109', normal, compile, [''])
test('mod110', normal, compile_fail, [''])
test('mod111', normal, compile, [''])
test('mod112', normal, compile, [''])
test('mod113', normal, compile, [''])
test('mod114', normal, multimod_compile_fail, ['mod114', '-v0'])
clean(['Mod114_Help.hi', 'Mod114_Help.o'])
test('mod115', normal, multimod_compile, ['mod115', '-v0'])
clean(['Mod115_A.hi', 'Mod115_A.o', 'Mod115_B.hi', 'Mod115_B.o'])
test('mod116', normal, compile_fail, [''])
test('mod117', normal, multimod_compile, ['mod117', '-v0'])
clean(['Mod117_A.hi', 'Mod117_A.o', 'Mod117_B.hi', 'Mod117_B.o'])
test('mod118', normal, multimod_compile, ['mod118', '-v0'])
clean(['Mod118_A.hi', 'Mod118_A.o', 'Mod118_B.hi', 'Mod118_B.o'])
test('mod119', normal, multimod_compile, ['mod119', '-v0'])
clean(['Mod119_A.hi', 'Mod119_A.o', 'Mod119_B.hi', 'Mod119_B.o'])
test('mod120', normal, multimod_compile_fail, ['mod120', '-v0'])
clean(['Mod120_A.hi', 'Mod120_A.o'])
test('mod121', normal, multimod_compile_fail, ['mod121', '-v0'])
clean(['Mod121_A.hi', 'Mod121_A.o'])
test('mod122', normal, multimod_compile_fail, ['mod122', '-v0'])
clean(['Mod122_A.hi', 'Mod122_A.o'])
test('mod123', normal, multimod_compile_fail, ['mod123', '-v0'])
clean(['Mod123_A.hi', 'Mod123_A.o'])
test('mod124', normal, multimod_compile_fail, ['mod124', '-v0'])
clean(['Mod124_A.hi', 'Mod124_A.o'])
test('mod125', normal, multimod_compile_fail, ['mod125', '-v0'])
clean(['Mod124_A.hi', 'Mod124_A.o'])
test('mod126', normal, multimod_compile_fail, ['mod126', '-v0'])
clean(['Mod126_A.hi', 'Mod126_A.o'])
test('mod127', normal, multimod_compile_fail, ['mod127', '-v0'])
clean(['Mod126_A.hi', 'Mod126_A.o'])
test('mod128', normal, multimod_compile, ['mod128', '-v0'])
clean(['Mod128_A.hi', 'Mod128_A.o'])
test('mod129', normal, compile, [''])
test('mod130', normal, compile_fail, [''])
test('mod131', normal, multimod_compile_fail, ['mod131', '-v0'])
clean(['Mod131_A.hi', 'Mod131_A.o', 'Mod131_B.hi', 'Mod131_B.o'])
test('mod132', normal, multimod_compile_fail, ['mod132', '-v0'])
clean(['Mod132_A.hi', 'Mod132_A.o', 'Mod132_B.hi', 'Mod132_B.o'])
test('mod133', reqlib('mtl'), compile, [''])
test('mod134', normal, compile_fail, [''])
test('mod135', normal, compile, [''])
test('mod136', normal, multimod_compile_fail, ['mod136', '-v0'])
clean(['Mod136_A.hi', 'Mod136_A.o'])
test('mod137', normal, multimod_compile, ['mod137', '-v0'])
clean(['Mod137_A.hi', 'Mod137_A.o'])
test('mod138', normal, multimod_compile_fail, ['mod138', '-v0'])
clean(['Mod138_A.hi', 'Mod138_A.o'])
test('mod139', normal, multimod_compile, ['mod139', '-v0'])
clean(['Mod139_A.hi', 'Mod139_A.o', 'Mod139_B.hi', 'Mod139_B.o'])
test('mod140', normal, multimod_compile, ['mod140', '-v0'])
clean(['Mod140_A.hi', 'Mod140_A.o'])
test('mod141', normal, multimod_compile, ['mod141', '-v0'])
clean(['Mod141_A.hi', 'Mod141_A.o'])
test('mod142', normal, multimod_compile_fail, ['mod142', '-v0'])
clean(['Mod142_A.hi', 'Mod142_A.o'])
test('mod143', normal, multimod_compile_fail, ['mod143', '-v0'])
clean(['Mod143_A.hi', 'Mod143_A.o'])
test('mod144', compose(normal, exit_code(2)), run_command, ['$MAKE -s --no-print-directory mod144 MAKELEVEL='])
clean(['Mod143_A.hi', 'Mod143_A.o'])
test('mod145', normal, multimod_compile_fail, ['mod145', '-v0'])
clean(['Mod145_A.hi', 'Mod145_A.o'])
test('mod146', compose(normal, exit_code(2)), run_command, ['$MAKE -s --no-print-directory mod146 MAKELEVEL='])
clean(['Mod145_A.hi', 'Mod145_A.o'])
test('mod147', normal, multimod_compile_fail, ['mod147', '-v0'])
clean(['Mod147_A.hi', 'Mod147_A.o'])
test('mod148', normal, compile, [''])
test('mod149', normal, compile, [''])
test('mod150', normal, compile_fail, [''])
test('mod151', normal, compile_fail, [''])
test('mod152', normal, compile_fail, [''])
test('mod153', normal, compile_fail, [''])
test('mod154', expect_fail_if_compiler_type('hugs'), compile, [''])
test('mod155', normal, compile_fail, [''])
test('mod156', normal, compile, [''])
test('mod157', normal, multimod_compile, ['mod157', '-v0'])
clean(['Mod157_A.hi', 'Mod157_A.o', 'Mod157_B.hi', 'Mod157_B.o',
       'Mod157_C.hi', 'Mod157_C.o', 'Mod157_D.hi', 'Mod157_D.o'])
test('mod158', compose(normal, exit_code(2)), run_command, ['$MAKE -s --no-print-directory mod158 MAKELEVEL='])
clean(['Mod157_A.hi', 'Mod157_A.o', 'Mod157_B.hi', 'Mod157_B.o',
       'Mod157_C.hi', 'Mod157_C.o', 'Mod157_D.hi', 'Mod157_D.o'])
test('mod159', normal, multimod_compile, ['mod159', '-v0'])
clean(['Mod159_A.hi', 'Mod159_A.o', 'Mod159_B.hi', 'Mod159_B.o',
       'Mod159_C.hi', 'Mod159_C.o', 'Mod159_D.hi', 'Mod159_D.o'])
test('mod160', compose(normal, exit_code(2)), run_command, ['$MAKE -s --no-print-directory mod160 MAKELEVEL='])
clean(['Mod159_A.hi', 'Mod159_A.o', 'Mod159_B.hi', 'Mod159_B.o',
       'Mod159_C.hi', 'Mod159_C.o', 'Mod159_D.hi', 'Mod159_D.o'])
test('mod161', normal, compile_fail, [''])
test('mod162', normal, multimod_compile, ['mod162', '-v0'])
clean(['Mod162_A.hi', 'Mod162_A.o'])
test('mod163', normal, multimod_compile, ['mod163', '-v0'])
clean(['Mod163_A.hi', 'Mod163_A.o'])
test('mod164', normal, multimod_compile_fail, ['mod164', '-v0'])
clean(['Mod164_A.hi', 'Mod164_A.o', 'Mod164_B.hi', 'Mod164_B.o'])
test('mod165', compose(normal, exit_code(2)), run_command, ['$MAKE -s --no-print-directory mod165 MAKELEVEL='])
clean(['Mod164_A.hi', 'Mod164_A.o', 'Mod164_B.hi', 'Mod164_B.o'])
test('mod166', normal, run_command, ['$MAKE -s --no-print-directory mod166 MAKELEVEL='])
clean(['Mod164_A.hi', 'Mod164_A.o', 'Mod164_B.hi', 'Mod164_B.o'])
test('mod167', normal, run_command, ['$MAKE -s --no-print-directory mod167 MAKELEVEL='])
clean(['Mod164_A.hi', 'Mod164_A.o', 'Mod164_B.hi', 'Mod164_B.o'])
test('mod168', normal, compile, [''])
test('mod169', normal, compile, [''])
test('mod170', normal, multimod_compile, ['mod170', '-v0'])
clean(['Mod170_A.hi', 'Mod170_A.o'])

test('mod171', normal, multimod_compile, ['mod171', '-v0 -Wall'])
clean(['Mod171_A.hi', 'Mod171_A.o', 'Mod171_B.hi', 'Mod171_B.o'])

test('mod172', normal, multimod_compile, ['mod172', '-v0'])
clean(['Mod172_B.hi', 'Mod172_B.o', 'Mod172_C.hi', 'Mod172_C.o'])

test('mod173', normal, multimod_compile, ['mod173', '-v0'])
clean(['Mod173_Aux.hi', 'Mod173_Aux.o'])
test('mod174', expect_broken(414), compile_fail, [''])

# mod175 is a sub-directory

test('mod176', normal, compile, ['-fwarn-unused-imports'])
test('mod177', normal, compile, ['-fwarn-unused-imports'])
test('mod178', normal, multimod_compile_fail, ['mod178', '-v0'])
clean(['Mod178_2.hi', 'Mod178_2.o'])
test('mod179', normal, multimod_compile, ['mod179', '-v0'])
clean(['Mod179_A.hi', 'Mod179_A.o'])

# After here we have GHC-only tests (the ones above are copied from Hugs)
